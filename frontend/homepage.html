<!-- @Author: Noah Sanchez
     @Date: 2025-09-17
     @FileName: homepage.html
     @Brief: HTML for app front end (style-only update) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Stock Consensus</title>

  <!-- Neon/market vibe fonts (with safe fallbacks). Remove if you prefer local-only. -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Urbanist:wght@400;700&display=swap" rel="stylesheet" />

  <!-- NOTE: this now points to homepage.css to match your file name -->
  <link rel="stylesheet" href="homepage.css" />
</head>
<script>
document.getElementById("search-form").addEventListener("submit", async function(e) {
  e.preventDefault(); // stop page reload
  const ticker = document.getElementById("q").value.trim().toUpperCase();

  if (!ticker) return;

  try {
    // Send ticker to backend endpoint
    const response = await fetch(`/api/stock/${ticker}`);
    const data = await response.json();

    // For now, just log to console
    console.log("Stock data:", data);

    // TODO: update results panel with data.name, data.current_price, data.consensus, etc.
  } catch (err) {
    console.error("Error fetching stock:", err);
  }
});
</script>

<body>
  <main class="wrap">
    <header class="hero">
      <h1 class="title">Stock <span>Consensus</span></h1>
      <p class="subtitle">Type a ticker (e.g., AAPL) and hit Enter</p>
    </header>

    <!-- Search bar -->
    <form id="search-form" class="search" action="#" method="get" autocomplete="off">
      <label for="q" class="visually-hidden">Search ticker</label>
      <input id="q" name="q" class="search__input" type="search"
             placeholder="Search by ticker…" list="tickers" required />
      <button class="btn" type="submit">Search</button>
      <!-- Lightweight HTML datalist suggestions -->
      <datalist id="tickers">
        <!-- DJIA 30 (quick starter list) -->
        <option value="MMM">3M Company</option>
        <option value="AXP">American Express Company</option>
        <option value="AAPL">Apple Inc.</option>
        <option value="BA">Boeing Company</option>
        <option value="CAT">Caterpillar Inc.</option>
        <option value="CVX">Chevron Corporation</option>
        <option value="CSCO">Cisco Systems, Inc.</option>
        <option value="KO">The Coca-Cola Company</option>
        <option value="DOW">Dow Inc.</option>
        <option value="GS">Goldman Sachs Group, Inc.</option>
        <option value="HD">The Home Depot, Inc.</option>
        <option value="IBM">International Business Machines Corporation</option>
        <option value="INTC">Intel Corporation</option>
        <option value="JNJ">Johnson & Johnson</option>
        <option value="JPM">JPMorgan Chase & Co.</option>
        <option value="MCD">McDonald's Corporation</option>
        <option value="MRK">Merck & Co., Inc.</option>
        <option value="MSFT">Microsoft Corporation</option>
        <option value="NKE">Nike, Inc.</option>
        <option value="PG">Procter & Gamble Company</option>
        <option value="CRM">Salesforce, Inc.</option>
        <option value="TRV">The Travelers Companies, Inc.</option>
        <option value="UNH">UnitedHealth Group Incorporated</option>
        <option value="VZ">Verizon Communications Inc.</option>
        <option value="V">Visa Inc.</option>
        <option value="WBA">Walgreens Boots Alliance, Inc.</option>
        <option value="WMT">Walmart Inc.</option>
        <option value="DIS">The Walt Disney Company</option>
        <option value="AMGN">Amgen Inc.</option>
        <option value="HON">Honeywell International Inc.</option>
      </datalist>
    </form>

    <!-- Results panel (empty by default) -->
    <section id="results" class="panel" aria-live="polite">
      <div class="placeholder">
        <h2>Results</h2>
        <p>Search a ticker to see price, metrics, and a buy/sell consensus.</p>
        <ul></ul>
      </div>
    </section>

    <footer class="foot">
      <small>Demo UI — wire up to your API when ready.</small>
    </footer>
  </main>
  <script>
document.getElementById("search-form").addEventListener("submit", async function(e) {
  e.preventDefault();
  const ticker = document.getElementById("q").value.trim().toUpperCase();

  if (!ticker) return;

  try {
    const response = await fetch(`http://127.0.0.1:8000/api/stock/${ticker}`);
    const data = await response.json();

    // Build HTML for results panel
    const resultsDiv = document.getElementById("results");
    resultsDiv.innerHTML = `
      <div class="panel">
        <h2>${data.name} (${data.symbol})</h2>
        <p><strong>Current Price:</strong> $${data.current_price}</p>
        <p><strong>Consensus:</strong> ${data.consensus}</p>
      </div>
    `;
  } catch (err) {
    console.error("Error fetching stock:", err);
  }
});
</script>

  <!-- No JS/functionality changes included here. Keep your current script as-is when you add it. -->
</body>
</html>